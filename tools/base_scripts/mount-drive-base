#!/bin/bash
# Usage: ./mount-drive <drive_letter>
# Example: ./mount-drive e

if [ -z "$1" ]; then
    echo "Usage: $0 <drive_letter>"
    exit 1
fi

drive_letter=$(echo "$1" | tr '[:upper:]' '[:lower:]')
mount_point="/mnt/$drive_letter"
windows_drive_letter=$(echo "$drive_letter" | tr '[:lower:]' '[:upper:]'):

# Create the mount point if it doesn't exist
if [ ! -d "$mount_point" ]; then
    echo "Creating mount point $mount_point..."
    sudo mkdir -p "$mount_point"
fi

# Check if already mounted
if mount | grep -q "on $mount_point "; then
    echo "Drive already mounted at $mount_point."
else
    echo "Mounting drive letter $windows_drive_letter to $mount_point..."
    sudo mount -t drvfs "$windows_drive_letter" "$mount_point"

    if mount | grep -q "on $mount_point "; then
        echo "Successfully mounted $windows_drive_letter at $mount_point."
    else
        echo "Failed to mount $windows_drive_letter at $mount_point."
        exit 1
    fi
fi

exit 0
